{% extends "base.html" -%}
{% from 'command_menu.html' import create_command_menu %}

{% block pagetitle %}AmmCon Main{% endblock pagetitle %}

{% block pageid %}mainpage{% endblock pageid %}

{% block content -%}

<div id="layout_main">
</div>

<div>
    <p>Server response: <span id="response"></span>
        <br>
        <span>System date: <span id="sysdate">{{ momentJS(date_time, attr_id="sysdate").format("YYYY/MM/DD H:mm:ss a") }}</span></span>
        <br>
        <span>System uptime: {{ uptime }}</span>
    </p>
</div>

{# TODO: query backend for devices + list of commands, generate commands automatically #}
{% if current_user.is_authenticated %}
{{ create_command_menu('living1_light_menu', [('living1 off', 'Off'), ('living1 on', 'On'), ('living1 night', 'Nightlight'), ('living1 low', 'Low'), ('living off', 'All Off'), ('living on', 'All On')]) }}
{{ create_command_menu('living2_light_menu', [('living2 off', 'Off'), ('living2 on', 'On'), ('living2 night', 'Nightlight'), ('living2 low', 'Low'), ('living off', 'All Off'), ('living on', 'All On')]) }}
{{ create_command_menu('bedroom1_light_menu', [('bedroom off', 'Off'), ('bedroom on', 'On'), ('bedroom night', 'Nightlight'), ('bedroom full', 'Full'), ('bedroom down', 'Dim'), ('bedroom up', 'Brighten')]) }}
{{ create_command_menu('bedroom2_light_menu', [('kayoroom off', 'Off'), ('kayoroom on', 'On'), ('kayoroom night', 'Nightlight'), ('kayoroom full', 'Full'), ('kayoroom down', 'Dim'), ('kayoroom up', 'Brighten')]) }}
{{ create_command_menu('bedroom3_light_menu', [('myroom off', 'Off'), ('myroom on', 'On'), ('myroom night', 'Nightlight'), ('myroom full', 'Full'), ('myroom down', 'Dim'), ('myroom up', 'Brighten')]) }}
{{ create_command_menu('living_aircon_menu', [('living AC off', 'Off'), ('living AC auto', 'Auto')]) }}
{{ create_command_menu('bedroom2_aircon_menu', [('bedroom2 AC off', 'Off'), ('bedroom2 AC auto', 'Auto')]) }}
{{ create_command_menu('bedroom3_aircon_menu', [('bedroom3 AC off', 'Off'), ('bedroom3 AC auto', 'Auto')]) }}
{{ create_command_menu('tv_menu', [('htpc wol', 'HTPC On'), ('tv off', 'TV Off'), ('tv on', 'TV On'), ('tv mute', 'Mute TV')]) }}
{% endif %}

{%- endblock content %}
