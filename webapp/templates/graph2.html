<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>graph test</title>

    <!-- amCharts javascript sources -->
    <script src="{{ url_for('static', filename='js/amcharts/amcharts.js') }}" type="text/javascript"></script>
    <script src="{{ url_for('static', filename='js/amcharts/plugins/dataloader/dataloader.min.js') }}" type="text/javascript"></script>
    <script src="{{ url_for('static', filename='js/amcharts/serial.js') }}" type="text/javascript"></script>
    <script src="{{ url_for('static', filename='js/amcharts/themes/black.js') }}" type="text/javascript"></script>
    <script src="{{ url_for('static', filename='js/amcharts/plugins/responsive/responsive.min.js') }}" type="text/javascript"></script>

    <!-- amCharts javascript code -->
		<script type="text/javascript">
			AmCharts.makeChart("chartdiv",
				{
					"type": "serial",
					"categoryField": "datetime",
					"dataDateFormat": "YYYY-MM-DD HH:NN:SS",
					"theme": "black",
					"categoryAxis": {
						"minPeriod": "ss",
						"parseDates": true
					},
					"chartCursor": {
						"enabled": true,
						"categoryBalloonDateFormat": "JJ:NN:SS"
					},
					"chartScrollbar": {
						"enabled": true
					},
					"trendLines": [],
					"graphs": [
						{
							"bullet": "round",
							"id": "AmGraph-1",
							"title": "Temperature",
							"valueAxis": "ValueAxis-1",
							"valueField": "temperature"
						},
						{
							"bullet": "square",
							"id": "AmGraph-2",
							"title": "Humidity",
							"valueAxis": "ValueAxis-2",
							"valueField": "humidity"
						}
					],
					"guides": [],
					"valueAxes": [
						{
							"id": "ValueAxis-1",
							"title": "degC"
						},
						{
							"id": "ValueAxis-2",
							"title": "%RH",
							"position": "right"
						}
					],
					"allLabels": [],
					"balloon": {},
					"legend": {
						"enabled": true,
						"useGraphSettings": true
					},
					"titles": [
						{
							"id": "Title-1",
							"size": 15,
							"text": "Living Room Temperature"
						}
					],
					"dataLoader": {
                        "url": "{{ url_for('graph_temps') }}",
                        "format": "json",
                        "postProcess": function(data) {
                            //remove root object 'data' otherwise amcharts won't find the data
                            return data.data;
                        }
                    },
                    "responsive": {
                        "enabled": true
                    }
				}
			);
		</script>

</head>
<body>
<div class="resizable">
    <div id="chartdiv" style="width: 100%; height: 300px; background-color: #222222;" ></div>
</div>
</body>
</html>
